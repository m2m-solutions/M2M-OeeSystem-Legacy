<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="DivisionFilterControl.ascx.cs" Inherits="M2M.DataCenter.WebUI.Production.DivisionFilterControl" EnableViewState="false" %>
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
<script type="text/javascript"> 
	function HandleRequest(sender, eventArgs)
	{
		sender.clearItems();
		var context = eventArgs.get_context();
		
		var articlesFilter = eventArgs.get_text();
	
		if(articlesFilter != null)
		{
			context["ArticlesFilter"] = articlesFilter;
		}
		
		var startDatePicker = $find("<%= dtStart.ClientID %>");
		var startDate = startDatePicker.get_selectedDate();
		
		if (startDate != null)
		{
			context["StartDate"] = startDate.toLocaleString();
		}
		
		var endDatePicker = $find("<%= dtEnd.ClientID %>");
		var endDate = endDatePicker.get_selectedDate();
		
		if (endDate != null)
		{
			context["EndDate"] = endDate.toLocaleString();
		}
		
		var shiftCombo = $find("<%= ProductionShifts.ClientID %>");
		var shift = shiftCombo.get_value();
		
		if (shift != null)
		{
			context["Shift"] = shift;
		}
	}
	
	function HandleOpen(sender, eventArgs)
    {
		sender.requestItems(sender.get_text(), false); 
    }
</script>
<div class="white_frame">
	<div class="header">
		<div class="top">
			<div class="bottom">
				<div class="left">
					<div class="right">
						<div class="bottomleft">
							<div class="bottomright">
								<div class="topleft">
									<div class="topright">
										<div class="content">
											<div class="filterView">
												<div class="item">
													<div class="label">
														<asp:Label ID="lbDateStart" runat="server" Text="Datum, start"></asp:Label>
													</div>
													<div class="input">
														<telerik:RadDatePicker ID="dtStart" Width="100px" runat="server" Skin="Default" AutoPostBack="False">
														</telerik:RadDatePicker>
													</div>
												</div>
												<div class="item">
													<div class="label">
														<asp:Label ID="lbDateEnd" runat="server" Text="Datum, slut"></asp:Label>
													</div>
													 <div class="input">
														<telerik:RadDatePicker ID="dtEnd" Width="100px" Skin="Default" AutoPostBack="False" runat="server">
														</telerik:RadDatePicker>
													</div>
												</div>
												<div class="item">
													<div class="label">
														<asp:Label ID="lbShift" runat="server" Text="Skift"></asp:Label>
													</div>
													 <div class="input">
														 <telerik:RadComboBox ID="ProductionShifts" Width="190px" Skin="Default" AutoPostBack="False" runat="server">
															 <CollapseAnimation Duration="200" Type="OutQuint" />
														 </telerik:RadComboBox>
													</div>
												</div>
												<div class="item">
													<div class="label">
														<asp:Label ID="lbArticle" runat="server" Text="Artikel"></asp:Label>
													</div>
													 <div class="input">
														<telerik:RadComboBox ID="rcbArticles" Skin="Default" OnClientDropDownOpening="HandleOpen" OnClientItemsRequesting="HandleRequest" LoadingMessage="Laddar..." Width="130px" EnableLoadOnDemand="True" ShowMoreResultsBox="False" ItemRequestTimeout="500" MarkFirstMatch="True" AllowCustomText="True" runat="server">
															  <WebServiceSettings Path="Articles.asmx" Method="GetDivisionArticles" />
															  <CollapseAnimation Duration="200" Type="OutQuint" />
														 </telerik:RadComboBox>
													</div>
												</div>
												<div class="last">
													<div class="button">
														<asp:Button ID="btnRefresh" runat="server" CssClass="buttonSmallWhiteOnWhite" Text="Uppdatera" OnClick="btnRefresh_Click" />
													</div>
												</div>
												<div class="divider" style="height:10px"></div>
												<div class="item">
													<div class="label">
														<asp:CheckBox ID="checkExcludeNoProduction" runat="server" Checked="True" Text="Ignorera icke-producerande tid" />
													</div>
												</div>
												<div class="divider"></div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="clear">&nbsp;</div>
	</div>
</div>
